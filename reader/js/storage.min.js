var EPUBJS=EPUBJS||{};EPUBJS.storage=function(){var t=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB;if(void 0===t)return console.warn("Storage: IndexedDB not available."),{init:function(){},get:function(){},set:function(){},clear:function(){}};var o;return{init:function(n){var e=t.open("epubjs-reader",1);e.onupgradeneeded=function(e){e=e.target.result;!1===e.objectStoreNames.contains("entries")&&e.createObjectStore("entries")},e.onsuccess=function(e){(o=e.target.result).onerror=function(e){console.error("IndexedDB",e)},n()},e.onerror=function(e){console.error("IndexedDB",e)}},get:function(n){o.transaction(["entries"],"readwrite").objectStore("entries").get(0).onsuccess=function(e){n(e.target.result)}},set:function(e){o.transaction(["entries"],"readwrite").objectStore("entries").put(e,0).onsuccess=function(){console.log("storage.set")}},clear:function(){void 0!==o&&(o.transaction(["entries"],"readwrite").objectStore("entries").clear().onsuccess=function(){console.log("storage.clear")})}}};